<!--     Spinner component-->
<app-spinner [blockedPanel]='blockedPanel'></app-spinner>



<div class="edit-equipment project-Budgeting open-side-modal" *ngIf="projectDetail">

    <div class="filter-header">
        <div class="container-fluid pad-0">
            <h1 class="title">{{'Show' | translate}}
                <span>{{projectDetail.title}}</span>
            </h1>
           

        </div>
    </div>


    <div class="inner-content">
        <div class="equipment-info-content">
            <ul class="equipment-current-status">
                <li [ngClass]="projectDetail.status=='In Progress'?'inProgress':projectDetail.status=='To Do' ||  projectDetail.status=='Archived'?'rejected':'approved'">
                    <h5 class="name">{{projectDetail.status}}
                        <span class="subName">{{'Project status' | translate}}</span>
                    </h5>
                </li>
                <li [ngClass]="projectDetail.financialStatus=='Approved'?'approved':projectDetail.financialStatus=='Rejected'?'rejected':'inProgress'">
                    <h5 class="name">{{projectDetail.financialStatus}}
                        <span class="subName">{{'Financial status' | translate}}</span>
                    </h5>
                </li>
                <li>
                    <div class="team-name">
                        <h5 class="name">{{projectDetail.nbSessions}}
                            <span class="subName">{{'Session' | translate}}</span>
                        </h5>
                    </div>
                </li>
                <li>
                    <div class="team-name">
                        <h5 class="name">{{projectDetail.nbEpisodes}}
                            <span class="subName">{{'Episode' | translate}}</span>
                        </h5>
                    </div>
                </li>
                <li>
                    <h5 class="name">{{projectDetail.follower&&projectDetail.follower.firstName?projectDetail.follower.firstName:''}} {{projectDetail.follower&&projectDetail.follower.lastName?projectDetail.follower.lastName:''}}
                        <span class="subName">{{'Managed By' | translate}}</span>
                    </h5>
                </li>
                <li>
                    <h5 class="name">{{'NRCS' | translate}}
                        <span class="subName">{{'Origin' | translate}}</span>
                    </h5>
                </li>

                <li>
                    <h5 class="name">{{projectDetail.saleEntity?projectDetail.saleEntity.name:''}}
                        <span class="subName">{{'Company' | translate}}</span>
                    </h5>
                </li>
                <li>
                    <h5 class="name">{{projectDetail.currency}}{{getCurrencySymbol(projectDetail.currency,'wide')}}
                        <span class="subName">{{'Currency' | translate}}</span>
                    </h5>
                </li>
                <li>
                    <h5 class="name">{{projectDetail.language}}
                        <span class="subName">{{'Language' | translate}}</span>
                    </h5>
                </li>
                <!-- <li class="text-right">

                    <div class="equipment-on">
                        <img alt="" src="../../assets/img/lg-market-place.png">
                        <label class="switch">
                            <input type="checkbox" disabled [(ngModel)]="equipmentDetail.marketplace">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="equipment-on pull-left">
                        <i class="fa fa-calendar-check-o" aria-hidden="true"></i>
                        <label class="switch">
                            <input type="checkbox" disabled [(ngModel)]="equipmentDetail.available">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </li> -->
            </ul>
        </div>

        <div class="row">

            <div class="col-lg-12">

                <!-- Info In Progress -->
                <div class="col-lg-3 ">
                    <!-- EQUIPMENT PANEL -->
                    <div class="grid">
                        <!-- <div class="grid-header">
                            Basic info
                        </div> -->
                        <div class="grid-body">
                            <ul class="equipment-info">
                                <li >
                                    <h5 class="name">{{projectDetail.season}}
                                        <span class="subName">
                                               
                                            </span>
                                    </h5>
                                </li>
                                <li *ngIf="projectDetail && projectDetail.company">
                                        <h5 class="name">{{projectDetail.company.name}}
                                            <span class="subName">{{projectDetail.company.contacts&&projectDetail.company.contacts.length>0?projectDetail.company.contacts[0].firstName:''}}
                                                {{projectDetail.company.contacts&&projectDetail.company.contacts.length>0?projectDetail.company.contacts[0].lastName:''}}</span>
                                        </h5>
                                    </li>
                                <li>
                                <li>
                                    <h5 class="name">{{'Accounting Number' | translate}} {{projectDetail.analyticAccountNumber}}
                                        <span class="subName"></span>
                                    </h5>
                                </li>

                                <li>
                                    <div class="team-name">
                                        <h5 class="name">{{'Duration' | translate}}:
                                            <span>{{projectDetail.minuteDuration}}</span>
                                            <span class="subName">
                                                {{'Year' | translate}}:{{projectDetail.year}}</span>
                                        </h5>
                                    </div>
                                </li>
                                <li>
                                    <h5 class="name">{{'Theme' | translate}}: <span [ngStyle]="{'background':projectDetail.theme}"> {{projectDetail.theme}} </span>
                                        <span class="subName">{{projectDetail.country}}</span>
                                    </h5>
                                </li>
                            </ul>
                        </div>
                    </div>

                </div>

                <!-- Add Channel PANEL -->
                <div class="col-lg-3">
                    <div class="grid">
                        <div class="grid-body">
                            <div class="table-responsive">
                                <table class="table common-Table">
                                    <thead>
                                        <tr>
                                            <th>{{'Channels' | translate}}</th>
                                            <th>{{'Format' | translate}}</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor=" let ch of projectDetail.channelFormat">
                                            <td>{{ch.channel.name}}</td>
                                            <td>{{ch.format}}</td>
                                        </tr>
                                      
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                  <!-- Contacts PANEL -->
                  <div class="col-lg-3">
                    <div class="grid">
                        <div class="grid-body">
                            <div class="table-responsive">
                                <table class="table common-Table">
                                    <thead>
                                        <tr>
                                            <th>{{'Contacts' | translate}}</th>

                                        </tr>
                                    </thead>
                                    <tbody *ngIf="projectDetail">
                                            <tr *ngFor="let contact of projectDetail.recordContacts">
                                                    <td>
                                                        <h5 class="name">{{contact.firstName}} {{contact.lastName}}
                                                            <span class="subName">{{contact.jobTitle}}</span>
                                                            <a href="javascript:void(0);" class="contactLink">
                                                                <i class="fa fa-ellipsis-h"></i>
                                                            </a>
                                                        </h5>
                                                    </td>
                                                </tr>
                                        <!-- <tr *ngFor="let contact of projectDetail.recordContacts">
                                            <td>
                                                <h5 class="name">{{contact.firstName}} {{contact.lastName}}
                                                    <span class="subName">{{contact.jobTitle}}</span>
                                                    <a href="javascript:void(0);" class="contactLink">
                                                        <i class="fa fa-ellipsis-h"></i>
                                                    </a>
                                                </h5>
                                            </td>
                                        </tr> -->
                                        <!-- <tr>
                                            <td>
                                                <h5 class="name">Ian Smith
                                                    <span class="subName">Postprod Supervisor</span>
                                                    <a href="javascript:void(0);" class="contactLink"><i class="fa fa-ellipsis-h"></i></a>
                                                </h5>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <h5 class="name">Susan Leight
                                                    <span class="subName">Executive Producer</span>
                                                    <a href="javascript:void(0);" class="contactLink"><i class="fa fa-ellipsis-h"></i></a>
                                                </h5>
                                            </td>
                                        </tr> -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Add Milestone PANEL -->
                <div class="col-lg-3">
                    <div class="text-center" style="max-width: 400px; height: 200px;">
                        <img [src]="projectDetail.document && projectDetail.document.url ? projectDetail.document.url : '../../assets/img/image_icon.png'" style="width:100%;height:100%;">
                    </div>
                </div>

                <!-- BOOKING DETAILS -->
                <div class="col-lg-12 col-md-12">
                    <div class="grid bookingTable">
                        <div class="grid-body">
                            <div class="table-responsive">
                                <table class="table text-center">
                                    <thead>
                                        <tr>
                                            <th >
                                                <span class="pull-left" style="position:relative;top:5px;">{{'Projects' | translate}}</span>
                                                <div class="filter">

                                                    <div class="filter-search">
                                                        <input type="text" [(ngModel)]="searchText" class="input-search" placeholder="Search...">
                                                        <i class="fa fa-search"></i>
                                                    </div>
                                                </div>
                                               
                                            </th>
                                            
                                            
                                            <th class="text-center">{{'Project Status' | translate}}
                                                    
                                                </th>
                                            <th class="text-center">{{'Financial Status' | translate}}
                                                
                                            </th>
                                            <th class="text-center">{{'Category' | translate}}
                                             
                                          </th>
                                           
                                            <th class="text-center">
                                              {{'Managed by' | translate}}
                                           </th>
                                           <th class="text-center">
                                            <h5 class="name">{{getCurrencySymbol(projectDetail.currency,'wide')}} {{projectDetail.totalPriceOfProjects}}
                                              <span class="subName">{{'Total' | translate}}</span>
                                          </h5>
                                          <th class="text-center">
                                            &nbsp;
                                          
                                         </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let project of projectDetail.linkedRecords|showProjectFilter:searchText,let i of index"  >
                                            <td class="text-left">
                                                <h5 class="name">{{project.title}}
                                                    <span class="subName"></span>
                                                </h5>
                                            </td>
                                            
                                             <td>
                                                <h5 class="name" >{{project.status}}
                                                    <span class="subName"></span>
                                                </h5>
                                            </td>
                                            <td>
                                                <h5 class="name" >{{project.financialStatus}}
                                                    <span class="subName"></span>
                                                </h5>
                                            </td>
                                            <td class="text-center">
                                                <h5 class="name">{{project.category}}
                                                    <span class="subName"></span>
                                                </h5>
                                            </td>
                                           
                                          <td class="text-center">
                                            <h5 class="name">{{project.follower?project.follower.firstName:''}} {{project.follower?project.follower.lastName:''}}
                                                <span class="subName"></span>
                                            </h5>
                                        </td>
                                          <td class="text-center">
                                            <h5 class="name"> {{getCurrencySymbol(projectDetail.currency,'wide')}} {{project.totalPriceIVAT}}
                                                <span class="subName"></span>
                                            </h5>
                                        </td>
                                          <td class="text-center">
                                           <a href="javascript:void(0)" class="link" (click)="redirectToProject(project)"><i class="fa fa-chevron-circle-right"></i></a>
                                        </td>
                                          
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DESCRIPTION PANEL -->
                <div class="col-lg-4 col-md-12">
                    <div class="grid">
                        <div class="grid-header">{{'Description' | translate}}</div>
                        <div class="grid-body">
                            <textarea class="form-control" name="" id="" cols="30" rows="5" readonly placeholder="Description">{{projectDetail.information?projectDetail.information.comment:''}}</textarea>
                        </div>
                    </div>
                </div>

                <!-- ATTACHMENT PANEL -->
                <div class="col-lg-4 col-md-12">
                    <div class="grid">
                        <div class="grid-body">
                            <div class="table-responsive">
                                <table class="table common-Table">
                                    <thead>
                                        <tr>
                                            <th>{{'Attachments' | translate}}
                                                <!-- <i class="fa fa-paperclip"></i>
                                                <a class="pull-right" href="javascript:void(0)" style="height: 0;font-size: 18px;line-height: 1.2;">
                                                    <i class="fa fa-plus-circle"></i>
                                                </a> -->
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody *ngIf="projectDetail && projectDetail.attachments">
                                        <tr *ngFor="let attachment of projectDetail.attachments">
                                            <td>
                                                <div class="loaded-attachment">
                                                    <a href="{{attachment.url}}">
                                                        <img [src]="attachment.extension==='pdf'?'../../assets/img/pdf_logo.jpg':'../../assets/img/image_icon.png'" alt="">{{attachment.type}}</a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>

   

</div>